{% extends 'PID/base.html' %}
{% load static %}
{% block content %}
    <div class="container" style="margin-top: 5%;">
        <form method="get" action="{% url 'startPID' %}" id="motor_control">
            <div class="row g-3">
                <div class="col-12">
                    <label for="Setpoint" class="form-label">Setpoint</label>
                    <input type="number" step="0.001" name="setpoint" class="form-control" id="Setpoint"
                           placeholder="enter setpoint">
                </div>
                <div class="col-md-4">
                    <label for="KP" class="form-label">KP</label>
                    <input type="number" step="0.00001" name="kp" class="form-control" id="KP">
                </div>
                <div class="col-md-4">
                    <label for="KI" class="form-label">KI</label>
                    <input type="number" step="0.00001" name="ki" class="form-control" id="KI">
                </div>
                <div class="col-md-4">
                    <label for="KD" class="form-label">KD</label>
                    <input type="number" step="0.00001" name="kd" class="form-control" id="KD">
                </div>
            </div>
            <div class="row g-3" style="margin-top: 1%;margin-bottom: 1%;">
                <div class="col-sm-10">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="mode" id="speed" value="1" checked>
                        <label class="form-check-label" for="speed">
                            Speed control
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="mode" id="position" value="2">
                        <label class="form-check-label" for="position">
                            Position control
                        </label>
                    </div>
                </div>
            </div>
            <div class="row g-3">
                <div class="col-12">
                    <button type="submit" class="btn btn-primary">Start motor rotation</button>
                </div>
            </div>
        </form>
    </div>
    <div class="container">
        <div id="chart"></div>
    </div>

    <script>
        $("#motor_control").submit
        (
            function (event) {
                event.preventDefault();
                let post_url = $(this).attr("action"); //get form action url
                let request_method = $(this).attr("method"); //get form GET/POST method
                let form_data = $(this).serialize(); //Encode form elements for submission
                $.ajax(
                    {
                        url: post_url,
                        type: request_method,
                        data: form_data
                    }
                ).done(
                    function (response) {
                    }
                    ).
                        fail(
                            function (error) {
                                console.log(error);
                            }
                        );
                    }
                );

    </script>

{% endblock content %}
